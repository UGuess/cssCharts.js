!function(a){a.fn.extend({cssCharts:function(c){var d={},c=a.extend(d,c);return this.each(function(){"bar"==c.type?b.bar(this):"donut"==c.type?b.donut(this):"line"==c.type?b.line(this):a(this).parent().hide()})}});var b={donut:function(b){var c=a(b),d=a(b).attr("data-percent"),e=a(b).attr("data-title");if(c.parent().addClass("donut"),e||(e="%"),d>1||0>d)return"between 0 - 1 please";var f=180,g=360,d=parseFloat(d).toFixed(2)*g,h=a("<div></div>").addClass("pie spinner"),i=a("<h2><p></p><span></span></h2>");i.find("p").text(100*(d/360)),i.find("span").text(e),c.on("show-donut-chart",function(){i.find("p").text(0),a({countNum:i.find("p").text()}).animate({countNum:100*(d/360)},{duration:500,easing:"linear",step:function(){i.find("p").text(Math.floor(this.countNum))},complete:function(){i.find("p").text(this.countNum)}}),c.on("hide-donut-chart",function(){i.find("p").text(0)})}),c.append(i);var j={nodes:{spinner:function(){return h.clone().attr("style","-webkit-transform: rotate("+j.values.spinner+"deg);"+"-moz-transform: rotate("+j.values.spinner+"deg);"+"transform: rotate("+j.values.spinner+"deg);")},mask:function(){return h.clone().addClass(j.values.selector).attr("style","-webkit-transform: rotate("+j.values.mask+"deg);"+"-moz-transform: rotate("+j.values.mask+"deg);"+"transform: rotate("+j.values.mask+"deg);")}},values:{spinner:d,mask:g,selector:""}},k=function(b){a.each(b,function(a,b){c.prepend(b())})};if(f>d){var l=d,m=jQuery.extend({},j);m.values.spinner=l,m.values.selector="mask",k(m.nodes)}else{var n=d-f,l=d-n;n+=f;var m=jQuery.extend({},j);m.values.spinner=l,m.values.mask=n,k(m.nodes)}},bar:function(b){var c=a(b);c.parent().addClass("bar");var d=c.attr("data-bars"),e=c.attr("data-unit"),f=c.height(),g=c.attr("data-grid"),h=c.attr("data-width"),i=c.attr("data-max");if(0===parseInt(g)&&c.css("background","none"),!d)return"No data to work with";e||(e="%");var j=function(){var a=JSON.parse("["+d+"]");return Math.max.apply(Math,a.map(function(a){return a[0]}))};(j()>i||!i)&&(i=j()),d=JSON.parse("[["+d+"]]"),d[0].length,a.each(d,function(b,g){var j=a("<ul></ul>"),k=a("<li><span></span></li>").height(f);for(b=0;b<d[0].length;b++){var l=j.clone();a.each(g[b],function(a){var f=k.clone(),g=d[0][b][a],j=g+e,m=100*(g/i);f.find("span").attr("title",j),h?f.find("span").attr("style","height:"+m+"%;"+"width:"+h+"px"):f.find("span").attr("style","height:"+m+"%"),l.append(f)}),c.append(l)}});var g=a("<div class='grid'></div>");c.parent().append(g);for(var l=0;10>=l;l++){var m=(10*l).toFixed(0),n=i/100,o=(m*n).toFixed(0);if(0==l%2){var p=a("<hr/>").css({bottom:m+"%"}).attr("data-y",o+e);c.parent().find(".grid").append(p)}}c.parent().width(c.width())},line:function(b){var c=function(b,c,d){var e=Math.round(Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2))),f=c.height/e,g=Math.round(180*Math.asin(f)/Math.PI);g=-g;var h=a(d).clone().attr("style","width:"+e+"px;").attr("data-height",c.height).attr("data-width",c.width).attr("data-hypotenuse",e).attr("data-angle",g).attr("data-x",b.x).attr("data-y",b.y);return h.find("span").attr("style","width:"+e+"px;"+"-webkit-transform: rotate("+g+"deg);"+"-moz-transform: rotate("+g+"deg);"+"transform: rotate("+g+"deg);").attr("data-height",c.height).attr("data-width",c.width).attr("data-hypotenuse",e).attr("data-angle",g),h.find("a").attr("style","height:40px;width:40px;").attr("data-x",b.x).attr("data-y",b.y),{angle:g,hypo:e,width:c.width,height:c.height,node:h}},d=function(b){var c=a("ul").find(b).prev(),d=parseInt(a("ul").find(b).attr("data-width").replace("-","")),e=parseInt(a("ul").find(b).attr("data-height").replace("-","")),f=parseInt(a("ul").find(b).attr("data-y").replace("-",""));if(0===c.length)a("ul").find(b).attr("data-total-width",d),a("ul").find(b).css("left","0px"),a("ul").find(b).attr("data-total-height",f-e),a("ul").find(b).css("bottom",f+"px"),a("ul").find(b).attr("data-y",f),a("ul").find(b).attr("data-x",0);else{var g=parseInt(c.attr("data-total-width").replace("-",""));d=parseInt(c.attr("data-total-width").replace("-",""))+parseInt(b.attr("data-width").replace("-","")),a("ul").find(b).attr("data-total-width",d),a("ul").find(b).css("left",g+"px");var h=parseInt(c.attr("data-total-height").replace("-",""));e=parseInt(c.attr("data-total-height"))+parseInt(b.attr("data-height")),a("ul").find(b).attr("data-total-height",e),a("ul").find(b).css("bottom",h+"px"),a("ul").find(b).attr("data-y",h),a("ul").find(b).attr("data-x",g)}},e=function(a,b){var c=Math.floor(a.find("li:last-child").attr("data-x"))+20,d=b[1];d=Math.max.apply(Math,d)+20,a.css({width:c,height:d}),a.parent().css({width:c,height:d}),a.parent().addClass("line")},f=a(b),g=f.attr("data-cord");g=JSON.parse("["+g+"]");var h=g,i=a("<div class='grid'></div>");f.parent().append(i);for(var j=0;j<h[0].length;j++){g={x:h[0][j],y:h[1][j]};var k={width:h[0][j+1]-h[0][j],height:h[1][j+1]-h[1][j]},l=c(g,k,a("<li><span></span><a></a></li>"));if(f.append(l.node),d(l.node),e(f,h),0===j%2){var m=f.height()/10,n=a("<hr/>").css({bottom:j*m}).attr("data-y",j*m);f.parent().find(".grid").append(n)}}}}}(jQuery);