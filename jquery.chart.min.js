!function(a){a.fn.extend({cssCharts:function(c){var d={},c=a.extend(d,c);return this.each(function(){"bar"==c.type?b.bar(this):"donut"==c.type?b.donut(this):"line"==c.type?b.line(this):a(this).parent().hide()})}});var b={donut:function(b){var c=a(b),d=a(b).attr("data-percent"),e=a(b).attr("data-title");if(c.parent().addClass("donut"),e||(e="%"),d>1||0>d)return"between 0 - 1 please";var f=180,g=360,d=parseFloat(d).toFixed(2)*g,h=a("<div></div>").addClass("pie spinner"),i=a("<h2><p></p><span></span></h2>");i.find("p").text(100*(d/360)),i.find("span").text(e),c.on("show-donut-chart",function(){i.find("p").text(0),a({countNum:i.find("p").text()}).animate({countNum:100*(d/360)},{duration:500,easing:"linear",step:function(){i.find("p").text(Math.floor(this.countNum))},complete:function(){i.find("p").text(this.countNum)}}),c.on("hide-donut-chart",function(){i.find("p").text(0)})}),c.append(i);var j={nodes:{spinner:function(){return h.clone().attr("style","-webkit-transform: rotate("+j.values.spinner+"deg);"+"-moz-transform: rotate("+j.values.spinner+"deg);"+"transform: rotate("+j.values.spinner+"deg);")},mask:function(){return h.clone().addClass(j.values.selector).attr("style","-webkit-transform: rotate("+j.values.mask+"deg);"+"-moz-transform: rotate("+j.values.mask+"deg);"+"transform: rotate("+j.values.mask+"deg);")}},values:{spinner:d,mask:g,selector:""}},k=function(b){a.each(b,function(a,b){c.prepend(b())})};if(f>d){var l=d,m=jQuery.extend({},j);m.values.spinner=l,m.values.selector="mask",k(m.nodes)}else{var n=d-f,l=d-n;n+=f;var m=jQuery.extend({},j);m.values.spinner=l,m.values.mask=n,k(m.nodes)}},bar:function(b){var c=a(b);c.parent().addClass("bar");var d=c.attr("data-bars"),e=c.attr("data-unit"),f=c.height(),g=c.attr("data-grid"),h=c.attr("data-width"),i=c.attr("data-max");if(0===parseInt(g)&&c.css("background","none"),!d)return"No data to work with";e||(e="%");var j=function(){var a=JSON.parse("["+d+"]");return Math.max.apply(Math,a.map(function(a){return a[0]}))};(j()>i||!i)&&(i=j()),d=JSON.parse("[["+d+"]]"),d[0].length,a.each(d,function(b,g){var j=a("<ul></ul>"),k=a("<li><span></span></li>").height(f);for(b=0;b<d[0].length;b++){var l=j.clone();a.each(g[b],function(a){var f=k.clone(),g=d[0][b][a],j=g+e,m=100*(g/i);f.find("span").attr("title",j),h?f.find("span").attr("style","height:"+m+"%;"+"width:"+h+"px"):f.find("span").attr("style","height:"+m+"%"),l.append(f)}),c.append(l)}});var g=a("<div class='grid'></div>");c.parent().append(g);for(var l=0;10>=l;l++){var m=(10*l).toFixed(0),n=i/100,o=(m*n).toFixed(0);if(0==l%2){var p=a("<hr/>").css({bottom:m+"%"}).attr("data-y",o+e);c.parent().find(".grid").append(p)}}c.parent().width(c.width())},line:function(b){var c=function(b,c,d){var e=Math.round(Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2))),f=c.height/e,g=Math.round(180*Math.asin(f)/Math.PI);g=-g;var h=a(d).clone();return h.find("a").attr("data-x",b.x).attr("data-y",b.y),{node:h}},d=function(b,c){a("ul").find(b).css("left",c.x+"px"),a("ul").find(b).css("bottom",c.y+"px")},e=function(a,b){var c=b[1];c=Math.max.apply(Math,c)+20;var d=b[0];d=Math.max.apply(Math,d)+20,a.css({width:d,height:c}),a.parent().css({width:d,height:c}),a.parent().addClass("line")},f=function(b){var d=".svg";if(b){var d=a('<div class="svg"><svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path d=""></path></svg></div>');2==b&&d.addClass("fill"),h.parent().append(d)}var e=function(){var a=k.slice(0),b=a.shift(),c=0,d=0,e=null,f=[];for(c=0;c<a.length;c++){for(e={},d=0;d<b.length;d++)e[d]={x:b[d],y:h.parent().find(".grid hr:last-child").attr("data-y")-a[c][d]};f.push(e)}return f[0]},f=e(),g=0,i=function(a,c,e){if("last"==e){var j=Object.keys(f).length-1,k=f[j].x;f[0].y,f[0].x,f[j].y;var o=" L"+k+","+k+" L"+0+","+k+" Z"}else var o=(e?"M":" L")+a+","+c;h.parent().find(d).find("path").attr("d",h.parent().find(d).find("path").attr("d")+""+o),g++,g<Object.keys(f).length&&setTimeout(i(f[g].x,f[g].y,!1),200),g==Object.keys(f).length&&2==b&&setTimeout(i(null,null,"last"),200)};i(f[0].x,f[0].y,!0)},g=function(b){var c=null;if(b)var c=a('<circle cx="'+b.x+'" cy="'+b.y+'" data-value="10" r="5"></circle>');return c},h=a(b),i=h.attr("data-fill"),j=h.attr("data-cord");j=JSON.parse("["+j+"]");var k=j,l=a("<div class='grid'></div>");h.parent().append(l),a('<g class="points"></g>');for(var n,p=0;p<k[0].length;p++){j={x:k[0][p],y:k[1][p]},n={width:k[0][p+1]-k[0][p],height:k[1][p+1]-k[1][p]},g(j);var r=c(j,n,a("<li><span></span><a></a></li>"));if(h.append(r.node),d(r.node,j),e(h,k),0===p%2){var s=h.height()/10,t=a("<hr/>").css({bottom:p*s}).attr("data-y",p*s);h.parent().find(".grid").append(t)}}f(1),i&&f(2)}}}(jQuery);