!function(a){a.fn.extend({cssCharts:function(c){var d={};return c=a.extend(d,c),this.each(function(){"bar"==c.type?b.bar(this):"line"==c.type?b.line(this):"donut"==c.type?b.donut(this):"pie"==c.type?b.pie(this):a(this).parent().hide()})}});var b={pie:function(b){var c=function(b,c,d,e,f){var g=a(document.createElementNS("http://www.w3.org/2000/svg",b));for(var h in c)g.attr(h,c[h]).attr("data-val",d).attr("data-title",e).attr("id","path"+f).attr("class","path");return g[0]},d=function(b,d){var f=[],g=[];a.each(d,function(a,b){g.push(b[1]),f.push(b[0])}),d=g;for(var h=d.reduce(function(a,b){return b+a},0),i=d.map(function(a){return 360*a/h}),j=-90,k=-90,l=0;l<i.length;l++){j=k,k=j+i[l];var m,n,o,p;m=parseInt(Math.round(200+195*Math.cos(Math.PI*j/180))),o=parseInt(Math.round(200+195*Math.sin(Math.PI*j/180))),n=parseInt(Math.round(200+195*Math.cos(Math.PI*k/180))),p=parseInt(Math.round(200+195*Math.sin(Math.PI*k/180)));var q="M200,200  L"+m+","+o+"  A195,195 0 "+(k-j>180?1:0)+",1 "+n+","+p+" z",t=parseInt(360*(l/i.length)),u="hsl("+t+", 60%, 50%)",v=c("path",{d:q,fill:u},d[l],f[l],l);b.prepend(v),e.append(b)}},e=a(b),f=a(b).attr("data-set"),g=JSON.parse(f),h=a('<svg viewBox="0 0 400 400" class="svg"></svg>');e.parent().addClass("pie"),d(h,g);var i={x:-1,y:-1};!function(){var b=a('<div class="charts-tip"></div>');e.mousemove(function(c){i.x=c.pageX,i.y=c.pageY;var d=a(c.target).clone(),f=e.find(".path:last-child"),g=d.attr("data-val"),h=d.attr("data-title"),j=d.attr("id");a('<use class="pathUse" xlink:href="#'+j+'" />'),g&&(b.css({left:i.x,top:i.y}),function(){a("body").find("."+b.attr("class")).remove(),b.html(h+": "+g),a("body").append(b)}(),function(){var a=f.attr("id"),b=d.attr("id");a!==b&&(e.find("#"+d.attr("id")).remove(),e.find(".svg").append(d))}())}),e.mouseleave(function(){a("body").find("."+b.attr("class")).remove()})}()},donut:function(b){var c=a(b),d=a(b).attr("data-percent"),e=a(b).attr("data-title");if(c.parent().addClass("donut"),e||(e="%"),d>1||0>d)return"between 0 - 1 please";var f=180,g=360;d=parseFloat(d).toFixed(2)*g;var h=a("<div></div>").addClass("pie spinner"),i=a("<h2><p></p><span></span></h2>");i.find("p").text(100*(d/360)),i.find("span").text(e),c.on("show-donut-chart",function(){i.find("p").text(0),a({countNum:i.find("p").text()}).animate({countNum:100*(d/360)},{duration:500,easing:"linear",step:function(){i.find("p").text(Math.floor(this.countNum))},complete:function(){i.find("p").text(this.countNum)}}),c.on("hide-donut-chart",function(){i.find("p").text(0)})}),c.append(i);var l,m,n,j={nodes:{spinner:function(){return h.clone().attr("style","-webkit-transform: rotate("+j.values.spinner+"deg);"+"-moz-transform: rotate("+j.values.spinner+"deg);"+"transform: rotate("+j.values.spinner+"deg);")},mask:function(){return h.clone().addClass(j.values.selector).attr("style","-webkit-transform: rotate("+j.values.mask+"deg);"+"-moz-transform: rotate("+j.values.mask+"deg);"+"transform: rotate("+j.values.mask+"deg);")}},values:{spinner:d,mask:g,selector:""}},k=function(b){a.each(b,function(a,b){c.prepend(b())})};f>d?(m=d,l=jQuery.extend({},j),l.values.spinner=m,l.values.selector="mask",k(l.nodes)):(n=d-f,m=d-n,n+=f,l=jQuery.extend({},j),l.values.spinner=m,l.values.mask=n,k(l.nodes))},bar:function(b){var c=a(b);c.parent().addClass("bar");var d=c.attr("data-bars"),e=c.attr("data-unit"),f=c.height(),g=c.attr("data-grid"),h=c.attr("data-width"),i=c.attr("data-max");if(0===parseInt(g,10)&&c.css("background","none"),!d)return"No data to work with";e||(e="%");var j=function(){var a=JSON.parse("["+d+"]");return Math.max.apply(Math,a.map(function(a){return a[0]}))};(j()>i||!i)&&(i=j()),d=JSON.parse("[["+d+"]]"),d[0].length,a.each(d,function(b,g){var j=a("<ul></ul>"),k=a("<li><span></span></li>").height(f);for(b=0;b<d[0].length;b++){var l=j.clone();a.each(g[b],function(a){var f=k.clone(),g=d[0][b][a],j=g+e,m=100*(g/i);f.find("span").attr("title",j),h?f.find("span").attr("style","height:"+m+"%;"+"width:"+h+"px"):f.find("span").attr("style","height:"+m+"%"),l.append(f)}),c.append(l)}});var l=a("<div class='grid'></div>");c.parent().append(l);for(var m=0;10>=m;m++){var n=(10*m).toFixed(0),o=i/100,p=(n*o).toFixed(0);if(0===m%2){var q=a("<hr/>").css({bottom:n+"%"}).attr("data-y",p+e);c.parent().find(".grid").append(q)}}c.parent().width(c.width())},line:function(b){var c=function(b,c){var d=a(c).clone();return d.find("a").attr("data-x",b.x).attr("data-y",b.y),d},d=function(b,c){a("ul").find(b).css("left",c.x+"px"),a("ul").find(b).css("bottom",c.y+"px")},e=function(b,c){var d=[],e=[];return a.each(c,function(b){a.each(c[b][1],function(a,b){d.push(b)}),a.each(c[b][0],function(a,b){e.push(b)})}),d=Math.max.apply(Math,d)+20,e=Math.max.apply(Math,e)+20,b.css({width:e,height:d}),b.parent().css({width:e,height:d}),b.parent().addClass("line"),{width:e,height:d}},f=function(a,b){var c=a.slice(0),d=c.shift(),e=0,f=0,g=null,h=[];for(e=0;e<c.length;e++){for(g={},f=0;f<d.length;f++)g[f]={x:d[f],y:b-c[e][f]};h.push(g)}return h[0]},g=function(b,c,d,e){var g=".svg";b&&(g=a('<div class="svg"><svg><path class="path" d=""></path></svg></div>'),g.addClass(".p"+e),2==b&&g.addClass("fill"),h.parent().append(g));var i=f(c,d),j=0,k=function(a,c,d){var e,f=Object.keys(i).length-1;e="last"==d?" L"+i[f].x+","+i[f].x+" L"+0+","+i[f].x+" Z":(d?"M":" ")+a+","+c,h.parent().find(g).find("path").attr("d",h.parent().find(g).find("path").attr("d")+""+e),j++,j<Object.keys(i).length&&setTimeout(k(i[j].x,i[j].y,!1),0),j==Object.keys(i).length&&2==b&&setTimeout(k(null,null,"last"),0)};k(i[0].x,i[0].y,!0)},h=a(b),i=h.attr("data-fill"),j=a("<div class='grid'></div>");h.parent().append(j),a('<g class="points"></g>');var m="["+h.attr("data-cord")+"]",n=h.attr("data-cord");n=JSON.parse("["+n+"]"),2!==n[0].length&&(n=JSON.parse("["+m+"]"));var o=e(h,n).height,p=function(b,e,f){for(var j=0;j<e[b].length;j++){n={x:e[0][j],y:e[1][j]};var k=c(n,a("<li><span></span><a></a></li>"));if(h.append(k),d(k,n),0===j%2){var l=f/10,m=a("<hr/>").css({bottom:j*l}).attr("data-y",j*l);h.parent().find(".grid").append(m)}}g(1,e,f,b),i&&g(2,e,f,b)};a.each(n,function(a,b){p(a,b,o)})}}}(jQuery);