!function(a){a.fn.extend({cssCharts:function(c){var d={};return c=a.extend(d,c),this.each(function(){"bar"==c.type?b.bar(this):"donut"==c.type?b.donut(this):"line"==c.type?b.line(this):a(this).parent().hide()})}});var b={donut:function(b){var c=a(b),d=a(b).attr("data-percent"),e=a(b).attr("data-title");if(c.parent().addClass("donut"),e||(e="%"),d>1||0>d)return"between 0 - 1 please";var f=180,g=360;d=parseFloat(d).toFixed(2)*g;var h=a("<div></div>").addClass("pie spinner"),i=a("<h2><p></p><span></span></h2>");i.find("p").text(100*(d/360)),i.find("span").text(e),c.on("show-donut-chart",function(){i.find("p").text(0),a({countNum:i.find("p").text()}).animate({countNum:100*(d/360)},{duration:500,easing:"linear",step:function(){i.find("p").text(Math.floor(this.countNum))},complete:function(){i.find("p").text(this.countNum)}}),c.on("hide-donut-chart",function(){i.find("p").text(0)})}),c.append(i);var l,m,n,j={nodes:{spinner:function(){return h.clone().attr("style","-webkit-transform: rotate("+j.values.spinner+"deg);"+"-moz-transform: rotate("+j.values.spinner+"deg);"+"transform: rotate("+j.values.spinner+"deg);")},mask:function(){return h.clone().addClass(j.values.selector).attr("style","-webkit-transform: rotate("+j.values.mask+"deg);"+"-moz-transform: rotate("+j.values.mask+"deg);"+"transform: rotate("+j.values.mask+"deg);")}},values:{spinner:d,mask:g,selector:""}},k=function(b){a.each(b,function(a,b){c.prepend(b())})};f>d?(m=d,l=jQuery.extend({},j),l.values.spinner=m,l.values.selector="mask",k(l.nodes)):(n=d-f,m=d-n,n+=f,l=jQuery.extend({},j),l.values.spinner=m,l.values.mask=n,k(l.nodes))},bar:function(b){var c=a(b);c.parent().addClass("bar");var d=c.attr("data-bars"),e=c.attr("data-unit"),f=c.height(),g=c.attr("data-grid"),h=c.attr("data-width"),i=c.attr("data-max");if(0===parseInt(g,10)&&c.css("background","none"),!d)return"No data to work with";e||(e="%");var j=function(){var a=JSON.parse("["+d+"]");return Math.max.apply(Math,a.map(function(a){return a[0]}))};(j()>i||!i)&&(i=j()),d=JSON.parse("[["+d+"]]"),d[0].length,a.each(d,function(b,g){var j=a("<ul></ul>"),k=a("<li><span></span></li>").height(f);for(b=0;b<d[0].length;b++){var l=j.clone();a.each(g[b],function(a){var f=k.clone(),g=d[0][b][a],j=g+e,m=100*(g/i);f.find("span").attr("title",j),h?f.find("span").attr("style","height:"+m+"%;"+"width:"+h+"px"):f.find("span").attr("style","height:"+m+"%"),l.append(f)}),c.append(l)}});var l=a("<div class='grid'></div>");c.parent().append(l);for(var m=0;10>=m;m++){var n=(10*m).toFixed(0),o=i/100,p=(n*o).toFixed(0);if(0===m%2){var q=a("<hr/>").css({bottom:n+"%"}).attr("data-y",p+e);c.parent().find(".grid").append(q)}}c.parent().width(c.width())},line:function(b){var c=function(b,c){var d=a(c).clone();return d.find("a").attr("data-x",b.x).attr("data-y",b.y),d},d=function(b,c){a("ul").find(b).css("left",c.x+"px"),a("ul").find(b).css("bottom",c.y+"px")},e=function(a,b){var c=b[1];c=Math.max.apply(Math,c)+20;var d=b[0];return d=Math.max.apply(Math,d)+20,a.css({width:d,height:c}),a.parent().css({width:d,height:c}),a.parent().addClass("line"),{width:d,height:c}},f=function(){var a=o.slice(0),b=a.shift(),c=0,d=0,e=null,f=[];for(c=0;c<a.length;c++){for(e={},d=0;d<b.length;d++)e[d]={x:b[d],y:p.height-a[c][d]};f.push(e)}return f[0]},g=function(b){var c=".svg";b&&(c=a('<div class="svg"><svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path class="path" d=""></path></svg></div>'),2==b&&c.addClass("fill"),h.parent().append(c));var d=f(),e=0,g=function(a,f,i){var j,k=Object.keys(d).length-1;j="last"==i?" L"+d[k].x+","+d[k].x+" L"+0+","+d[k].x+" Z":(i?"M":" ")+a+","+f,h.parent().find(c).find("path").attr("d",h.parent().find(c).find("path").attr("d")+""+j),e++,e<Object.keys(d).length&&setTimeout(g(d[e].x,d[e].y,!1),0),e==Object.keys(d).length&&2==b&&setTimeout(g(null,null,"last"),0)};g(d[0].x,d[0].y,!0)},h=a(b),i=h.attr("data-fill"),j=a("<div class='grid'></div>");h.parent().append(j),a('<g class="points"></g>');var l,n=h.attr("data-cord");n=JSON.parse("["+n+"]");var o=n,p=e(h,o);!function(){for(var b=0;b<o[0].length;b++){n={x:o[0][b],y:o[1][b]},l={width:o[0][b+1]-o[0][b],height:o[1][b+1]-o[1][b]};var e=c(n,a("<li><span></span><a></a></li>"));if(h.append(e),d(e,n),0===b%2){var f=h.height()/10,g=a("<hr/>").css({bottom:b*f}).attr("data-y",b*f);h.parent().find(".grid").append(g)}}}(),g(1),i&&g(2)}}}(jQuery);